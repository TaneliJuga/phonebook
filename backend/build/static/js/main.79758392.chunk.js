(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{47:function(t,e,n){"use strict";n.r(e);var c=n(21),a=n.n(c),r=n(1),o=n(5),u=n(4),i=n(3),s=n(7),j=n.n(s),b=(n(8),n(10)),l=n(0),d=["name","onChange","type"],f=function(t){var e=t.name,n=t.onChange,c=t.type,a=Object(b.a)(t,d),o=Object(r.a)(Object(r.a)({},a),{},{id:e,onChange:n,type:c});return Object(l.jsxs)("div",{className:"form-column",children:[Object(l.jsx)("label",{htmlFor:e,children:e}),Object(l.jsx)("input",Object(r.a)({},o))]})},O=n(22);function v(t,e){return e.target.value}var m=[["name",["value",""],"text",v],["number",["value",""],"text",v]].map((function(t){var e=Object(u.a)(t,4),n=e[0],c=Object(u.a)(e[1],2);return{name:n,stateAttribute:{name:c[0],initialValue:c[1]},type:e[2],getValue:e[3]}})),h=m.map((function(t){return{key:t.name}}));var p=m.reduce((function(t,e){var n=e.name,c=e.stateAttribute;return t[n]=c.initialValue,t}),{});var x=function(t){var e=t.selectedContacts,n=t.updateContact,c=t.onSuccessfullUpdate,a=(t.allContacts,e.reduce((function(t,e){return t[e.id]=function(t){return m.reduce((function(e,n){var c=n.name;return e[c]=t[c],e}),{})}(e),t}),{})),s=Object(i.useState)(a),j=Object(u.a)(s,2),b=j[0],d=j[1];function O(t){var e=function(t,e){var n=Object(r.a)({},e);return m.forEach((function(e){var c=e.name;n[c]=t[c]})),n}(b[t.id],t);n(e).then((function(t){c()}))}var v,h,p=(v=b,h=d,m.map((function(t){var e=t.name,n=t.getValue;return Object(r.a)(Object(r.a)({},t),{},{onChange:function(t,c){var a=v[e],o=n(a,t),u=Object(r.a)({},v);u[c][e]=o,h(u)}})})));return Object(l.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e.forEach((function(t){O(t)}))},className:"update-form",children:[Object.entries(b).map((function(t){var e=Object(u.a)(t,2),n=e[0],c=e[1];return Object(l.jsx)("fieldset",{children:p.map((function(t){var e,a=t.name,u=t.type,i=t.onChange,s=t.stateAttribute,j=(e={name:a,type:u,onChange:function(t){i(t,n)}},Object(o.a)(e,s.name,c[a]),Object(o.a)(e,"key",a),e);return Object(l.jsx)(f,Object(r.a)({},j))}))})})),Object(l.jsx)("button",{type:"submit",children:"save"})]})},C=["selectedContacts","text"],g=function(t){var e=t.selectedContacts,n=t.text,c=Object(b.a)(t,C),a=0===e.length;return Object(l.jsx)("button",Object(r.a)(Object(r.a)({},c),{},{disabled:a,children:n}))},y=function(t){var e=t.selectedContacts,n=t.removeContact;return Object(l.jsx)(g,{onClick:function(){e.forEach((function(t){n(t)}))},selectedContacts:e,text:"Remove"})},k=function(t){var e={selectedContacts:t.selectedContacts,text:t.text,onClick:t.onClick};return Object(l.jsx)(g,Object(r.a)({},e))},S=function(t){var e=t.contacts,n=t.removeContact,c=t.updateContact,a=Object(i.useState)([]),r=Object(u.a)(a,2),o=r[0],s=r[1],j=Object(i.useState)(!1),b=Object(u.a)(j,2),d=b[0],f=b[1],v=o.map((function(t){return e.find((function(e){return e.id==t}))})).filter((function(t){return void 0!==t}));function m(t){var e=t.slice(0,1),n=t.slice(1);return e.toUpperCase()+n.toLowerCase()}function p(t){return function(){var e=o.indexOf(t);if(-1!==e){var n=o.slice();n.splice(e,1),s(n)}else s([].concat(Object(O.a)(o),[t]))}}var C=d?"cancel":"update",g=v.length>0&&d;return Object(l.jsxs)("div",{children:[Object(l.jsx)("div",{children:g&&Object(l.jsx)(x,{selectedContacts:v,updateContact:c,onSuccessfullUpdate:function(){f(!1)}})}),Object(l.jsxs)("div",{className:"table-container",children:[Object(l.jsxs)("table",{children:[Object(l.jsx)("caption",{children:"Contacts"}),Object(l.jsx)("thead",{children:Object(l.jsx)("tr",{children:h.map((function(t){var e=t.key;return Object(l.jsx)("th",{children:m(e)},e)}))})}),Object(l.jsx)("tbody",{children:e.map((function(t){var e=t.id,n=-1!==o.indexOf(e)?"checked":"";return Object(l.jsx)("tr",{className:n,onClick:p(e),children:h.map((function(e){var n=e.key;return Object(l.jsx)("td",{children:t[n]})}))},e)}))})]}),Object(l.jsxs)("div",{className:"actions",children:[Object(l.jsx)(y,{selectedContacts:v,removeContact:n}),Object(l.jsx)(k,{selectedContacts:v,onClick:function(){f(!d)},text:C})]})]})]})},N=function(t){var e,n,c=t.addContact,a=Object(i.useState)(p),s=Object(u.a)(a,2),j=s[0],b=s[1],d=(e=j,n=b,m.map((function(t){var c=t.name,a=t.getValue;return Object(r.a)(Object(r.a)({},t),{},{onChange:function(t){var u=e[c],i=a(u,t);n(Object(r.a)(Object(r.a)({},e),{},Object(o.a)({},c,i)))}})})));return Object(l.jsxs)("form",{onSubmit:function(t){t.preventDefault(),c(j).then((function(t){b(p)}))},className:"contact-form",children:[d.map((function(t){var e,n=t.name,c=t.type,a=t.onChange,u=t.stateAttribute,i=(e={name:n,type:c,onChange:a},Object(o.a)(e,u.name,j[n]),Object(o.a)(e,"key",n),e);return Object(l.jsx)(f,Object(r.a)({},i))})),Object(l.jsx)("button",{type:"submit",children:"save"})]})},A=function(){var t=Object(i.useState)([]),e=Object(u.a)(t,2),n=e[0],c=e[1];function a(){j.a.get("/api/contacts").then((function(t){c(t.data)}))}Object(i.useEffect)((function(){a()}),[]);return Object(l.jsxs)("div",{children:[Object(l.jsx)(S,{contacts:n,removeContact:function(t){var e=t.id;return j.a.delete("/api/contacts/".concat(e)).then((function(t){a()}))},updateContact:function(t){console.log("updateContact");var e=t.id;return j.a.put("/api/contacts/".concat(e),t).then((function(t){a()}))}}),Object(l.jsx)("h2",{children:"Add contact"}),Object(l.jsx)(N,{addContact:function(t){return j.a.post("/api/contacts",t).then((function(t){a()}))}})]})};a.a.render(Object(l.jsx)(A,{}),document.getElementById("root"))},8:function(t,e,n){}},[[47,1,2]]]);
//# sourceMappingURL=main.79758392.chunk.js.map